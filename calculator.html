<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>금융 계산기 - 숨은지원금24</title>
    <meta name="description" content="다양한 금융 계산기를 한눈에! 대출이자 계산기, 지원금 계산기, 환급금 계산기 등 실용적인 금융 도구를 제공합니다.">
    <meta name="keywords" content="금융 계산기, 대출이자 계산기, 지원금 계산기, 환급금 계산기, 금융 도구">
    <script src="common-head.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .calculator-header {
            background: white;
            padding: 16px 20px;
            border-bottom: 1px solid #e0e0e0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .calculator-title {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 16px;
        }
        
        .calculator-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 8px;
        }
        
        .calculator-tab {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        
        .calculator-tab.active {
            background: #333;
            color: white;
        }
        
        .calculator-tab:not(.active) {
            background: #f5f5f5;
            color: #666;
        }
        
        .calculator-list {
            padding: 20px;
            background: #f8f9fa;
            min-height: 100vh;
        }
        
        .calculator-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border: 1px solid #f0f0f0;
        }
        
        .calculator-card-header {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .calculator-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            flex-shrink: 0;
        }
        
        .calculator-info {
            flex: 1;
        }
        
        .calculator-name {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }
        
        .calculator-description {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 16px;
        }
        
        .calculator-form {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        
        .form-group {
            margin-bottom: 12px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 4px;
        }
        
        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #2196F3;
        }
        
        .calculator-result {
            background: #e3f2fd;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            border-left: 4px solid #2196F3;
        }
        
        .result-title {
            font-size: 16px;
            font-weight: 600;
            color: #1976D2;
            margin-bottom: 8px;
        }
        
        .result-value {
            font-size: 20px;
            font-weight: 700;
            color: #2196F3;
            margin-bottom: 4px;
        }
        
        .result-detail {
            font-size: 13px;
            color: #666;
        }
        
        .calculator-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
        }
        
        .calculator-btn:hover {
            background: #1976D2;
            transform: translateY(-1px);
        }
        
        .floating-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 1000;
            font-size: 14px;
            font-weight: 500;
        }
        
        .floating-banner-content {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .floating-banner-close {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 4px;
        }
        
        .main-content {
            margin-top: 48px;
        }
        
        .search-menu-area {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-left: auto;
        }
        
        .search-btn, .menu-btn {
            background: none;
            border: none;
            font-size: 20px;
            color: #666;
            cursor: pointer;
            padding: 8px;
        }
    </style>
</head>
<body>
    <!-- 상단 알림 배너 -->
    <div class="floating-banner" id="topBanner" onclick="openSupportModal()">
        <div class="floating-banner-content">
            <i class="fas fa-map-marker-alt"></i>
            <span>새로운 신규 지원금 할인이 있어요!</span>
        </div>
        <button class="floating-banner-close" onclick="closeBanner()">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="main-content">
        <!-- 계산기 헤더 -->
        <header class="calculator-header">
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <h1 class="calculator-title">금융 계산기</h1>
                <div class="search-menu-area">
                    <button class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="menu-btn" id="menuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
            
            <div class="calculator-tabs">
                <button class="calculator-tab active" onclick="switchCalculatorTab('loan')">대출이자 계산기</button>
                <button class="calculator-tab" onclick="switchCalculatorTab('support')">지원금 계산기</button>
                <button class="calculator-tab" onclick="switchCalculatorTab('refund')">환급금 계산기</button>
                <button class="calculator-tab" onclick="switchCalculatorTab('salary')">연봉 계산기</button>
            </div>
        </header>

        <!-- 계산기 목록 -->
        <main class="calculator-list">
            <!-- 근로장려금 계산기 카드 -->
            <div class="calculator-card" onclick="openEarnedIncomeCalculator()" style="cursor: pointer;">
                <div class="calculator-card-header">
                    <div class="calculator-logo" style="background: #FF9800;">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="calculator-info">
                        <div class="calculator-name">근로 장려금 계산기</div>
                        <div class="calculator-description">
                            근로소득과 가족 구성원을 입력하면 받을 수 있는 근로장려금을 계산해드립니다.
                        </div>
                    </div>
                </div>
            </div>

            <!-- 대출이자 계산기 -->
            <div class="calculator-card">
                <div class="calculator-card-header">
                    <div class="calculator-logo" style="background: #4CAF50;">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="calculator-info">
                        <div class="calculator-name">대출이자 계산기</div>
                        <div class="calculator-description">
                            대출 원금, 이자율, 상환기간을 입력하면 월 상환금과 총 이자를 계산해드립니다.
                        </div>
                    </div>
                </div>
                
                <div class="calculator-form">
                    <div class="form-group">
                        <label class="form-label">대출금액 (만원)</label>
                        <input type="number" class="form-input" id="loanAmount" placeholder="예: 3000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">연이자율 (%)</label>
                        <input type="number" class="form-input" id="interestRate" placeholder="예: 4.5" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">상환기간 (년)</label>
                        <input type="number" class="form-input" id="loanTerm" placeholder="예: 20">
                    </div>
                    <button class="calculator-btn" onclick="calculateLoan()">계산하기</button>
                </div>
                
                <div class="calculator-result" id="loanResult" style="display: none;">
                    <div class="result-title">대출 계산 결과</div>
                    <div class="result-value" id="monthlyPayment">월 상환금: 0원</div>
                    <div class="result-detail" id="totalInterest">총 이자: 0원</div>
                </div>
            </div>

            <!-- 지원금 계산기 -->
            <div class="calculator-card">
                <div class="calculator-card-header">
                    <div class="calculator-logo" style="background: #FF9800;">
                        <i class="fas fa-hand-holding-heart"></i>
                    </div>
                    <div class="calculator-info">
                        <div class="calculator-name">지원금 계산기</div>
                        <div class="calculator-description">
                            가구원 수와 소득을 입력하면 받을 수 있는 지원금을 계산해드립니다.
                        </div>
                    </div>
                </div>
                
                <div class="calculator-form">
                    <div class="form-group">
                        <label class="form-label">가구원 수</label>
                        <select class="form-input" id="familySize">
                            <option value="">선택하세요</option>
                            <option value="1">1인 가구</option>
                            <option value="2">2인 가구</option>
                            <option value="3">3인 가구</option>
                            <option value="4">4인 가구</option>
                            <option value="5">5인 가구</option>
                            <option value="6">6인 이상</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">월 소득 (만원)</label>
                        <input type="number" class="form-input" id="monthlyIncome" placeholder="예: 300">
                    </div>
                    <button class="calculator-btn" onclick="calculateSupport()">계산하기</button>
                </div>
                
                <div class="calculator-result" id="supportResult" style="display: none;">
                    <div class="result-title">지원금 계산 결과</div>
                    <div class="result-value" id="supportAmount">지원금: 0원</div>
                    <div class="result-detail" id="supportDetail">지원 대상 여부: 확인 필요</div>
                </div>
            </div>

            <!-- 환급금 계산기 -->
            <div class="calculator-card">
                <div class="calculator-card-header">
                    <div class="calculator-logo" style="background: #9C27B0;">
                        <i class="fas fa-undo"></i>
                    </div>
                    <div class="calculator-info">
                        <div class="calculator-name">환급금 계산기</div>
                        <div class="calculator-description">
                            근로소득과 가족 구성원을 입력하면 받을 수 있는 환급금을 계산해드립니다.
                        </div>
                    </div>
                </div>
                
                <div class="calculator-form">
                    <div class="form-group">
                        <label class="form-label">연간 근로소득 (만원)</label>
                        <input type="number" class="form-input" id="annualIncome" placeholder="예: 3000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">가족 구성원 수</label>
                        <input type="number" class="form-input" id="familyMembers" placeholder="예: 3">
                    </div>
                    <div class="form-group">
                        <label class="form-label">자녀 수 (만 18세 이하)</label>
                        <input type="number" class="form-input" id="childrenCount" placeholder="예: 1">
                    </div>
                    <button class="calculator-btn" onclick="calculateRefund()">계산하기</button>
                </div>
                
                <div class="calculator-result" id="refundResult" style="display: none;">
                    <div class="result-title">환급금 계산 결과</div>
                    <div class="result-value" id="refundAmount">환급금: 0원</div>
                    <div class="result-detail" id="refundDetail">근로장려금 포함</div>
                </div>
            </div>

            <!-- 연봉 계산기 -->
            <div class="calculator-card">
                <div class="calculator-card-header">
                    <div class="calculator-logo" style="background: #2196F3;">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="calculator-info">
                        <div class="calculator-name">연봉 계산기</div>
                        <div class="calculator-description">
                            월급을 입력하면 연봉과 세후 실수령액을 계산해드립니다.
                        </div>
                    </div>
                </div>
                
                <div class="calculator-form">
                    <div class="form-group">
                        <label class="form-label">월 급여 (만원)</label>
                        <input type="number" class="form-input" id="monthlySalary" placeholder="예: 300">
                    </div>
                    <div class="form-group">
                        <label class="form-label">연말정산 여부</label>
                        <select class="form-input" id="yearEndTax">
                            <option value="yes">예</option>
                            <option value="no">아니오</option>
                        </select>
                    </div>
                    <button class="calculator-btn" onclick="calculateSalary()">계산하기</button>
                </div>
                
                <div class="calculator-result" id="salaryResult" style="display: none;">
                    <div class="result-title">연봉 계산 결과</div>
                    <div class="result-value" id="annualSalary">연봉: 0원</div>
                    <div class="result-detail" id="netSalary">세후 실수령액: 0원</div>
                </div>
            </div>
        </main>
    </div>

    <!-- 민생회복지원금 모달 -->
    <div class="modal-overlay" id="supportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>민생회복지원금</h2>
                <button class="modal-close" onclick="closeSupportModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-logo">
                    <img src="public/gov.png" alt="행정안전부" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover;">
                </div>
                <div class="modal-info">
                    <div class="support-badge">지원금</div>
                    <h3>민생회복지원금 신청</h3>
                    <p class="support-agency">행정안전부 · 신청마감: 25.10.30(목)</p>
                    <div class="support-amount">
                        <span class="amount-text">최대 55만원</span>
                        <span class="amount-desc">가구원 수와 소득에 따라 지원</span>
                    </div>
                    <div class="support-description">
                        <h4>📋 지원 대상</h4>
                        <ul>
                            <li>기준 중위소득 75% 이하 가구</li>
                            <li>건강보험료 기준으로 선정</li>
                            <li>1인 가구 ~ 6인 이상 가구</li>
                        </ul>
                        <h4>💰 지원 내용</h4>
                        <ul>
                            <li>1인 가구: 25만원</li>
                            <li>2인 가구: 40만원</li>
                            <li>3인 가구: 50만원</li>
                            <li>4인 이상: 55만원</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a href="detail.html" class="modal-apply-btn">
                    <i class="fas fa-external-link-alt"></i>
                    신청 바로가기
                </a>
            </div>
        </div>
    </div>

    <!-- 근로장려금 계산기 모달 -->
    <div class="modal-overlay" id="earnedIncomeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>근로장려금 계산기</h2>
                <button class="modal-close" onclick="closeEarnedIncomeCalculator()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="calculator-form">
                    <div class="form-group">
                        <label class="form-label">연간 근로소득 (만원)</label>
                        <input type="number" class="form-input" id="earnedIncome" placeholder="예: 3000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">가족 구성원 수</label>
                        <input type="number" class="form-input" id="familyMembers" placeholder="예: 3">
                    </div>
                    <div class="form-group">
                        <label class="form-label">자녀 수 (만 18세 이하)</label>
                        <input type="number" class="form-input" id="childrenCount" placeholder="예: 1">
                    </div>
                    <button class="calculator-btn" onclick="calculateEarnedIncome()">계산하기</button>
                </div>
                
                <div class="calculator-result" id="earnedIncomeResult" style="display: none;">
                    <div class="result-title">근로장려금 계산 결과</div>
                    <div class="result-value" id="earnedIncomeAmount">근로장려금: 0원</div>
                    <div class="result-detail" id="earnedIncomeDetail">지원 대상 여부: 확인 필요</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 더보기 메뉴 모달 -->
    <div class="more-menu-overlay" id="moreMenuOverlay" onclick="closeMoreMenu()"></div>
    <div class="more-menu-modal" id="moreMenuModal">
        <div class="more-menu-header">
            <h2 class="elementor-heading-title elementor-size-default">원하시는 정보를 찾아보세요</h2>
            <button class="close-btn" onclick="closeMoreMenu()"><i class="fas fa-times"></i></button>
        </div>
        <div class="more-menu-body">
            <div class="menu-items-container">
                <a class="menu-link-box" href="policy.html">
                    <div class="menu-link-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 -960 960 960" width="48px" fill="#0067FF"><path d="M600-160q-134 0-227-93t-93-227q0-134 93-227t227-93q134 0 227 93t93 227q0 134-93 227t-227 93Zm-306-12q-113-14-183.5-103.5T40-480q0-115 70.5-204.5T294-788v58q-88 16-141 87.5T100-480q0 91 53 162.5T294-230v58Zm306-308Zm0 260q107 0 183.5-76.5T860-480q0-107-76.5-183.5T600-740q-107 0-183.5 76.5T340-480q0 107 76.5 183.5T600-220Z"></path></svg>
                    </div>
                    <div class="menu-link-text-content">
                        <h3 class="menu-link-title">지원금 정보</h3>
                        <span class="menu-link-subtitle">Gov. Fund</span>
                    </div>
                </a>
                <a class="menu-link-box" href="loan.html">
                    <div class="menu-link-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 -960 960 960" width="48px" fill="#0067FF"><path d="M212-241v-339h60v339h-60Zm242 0v-339h60v339h-60ZM80-640v-53l400-228 400 228v53H80Zm134-60h532L480-852 214-700ZM80-121v-60h500q2 14 3.5 28.5T591-121H80Zm608-291v-168h60v138l-60 30ZM800 0q-69-17-114.5-79.5T640-218v-102l160-80 160 80v102q0 76-45.5 138.5T800 0Zm-21-120 142-142-28-28-114 114-59-59-28 28 87 87ZM214-700h532-532Z"></path></svg>
                    </div>
                    <div class="menu-link-text-content">
                        <h3 class="menu-link-title">대출 정보</h3>
                        <span class="menu-link-subtitle">Capital</span>
                    </div>
                </a>
                <a class="menu-link-box" href="refund.html">
                    <div class="menu-link-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 -960 960 960" width="48px" fill="#0067FF"><path d="M480-80q-75 0-140.5-28T225-185q-49-49-77-114.5T120-440h60q0 125 87.5 212.5T480-140q125 0 212.5-87.5T780-440q0-125-85-212.5T485-740h-23l73 73-41 42-147-147 147-147 41 41-78 78h23q75 0 140.5 28T735-695q49 49 77 114.5T840-440q0 75-28 140.5T735-185q-49 49-114.5 77T480-80Z"></path></svg>
                    </div>
                    <div class="menu-link-text-content">
                        <h3 class="menu-link-title">환급금 정보</h3>
                        <span class="menu-link-subtitle">Refund</span>
                    </div>
                </a>
                <a class="menu-link-box" href="feed.html">
                    <div class="menu-link-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 -960 960 960" width="48px" fill="#0067FF"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h440l200 200v440q0 33-23.5 56.5T760-120H200Zm80-160h400v-80H280v80Zm0-160h400v-80H280v80Zm320-160h160L600-760v160Zm-320 0h200v-80H280v80Z"></path></svg>
                    </div>
                    <div class="menu-link-text-content">
                        <h3 class="menu-link-title">머니 피드</h3>
                        <span class="menu-link-subtitle">Money Feed</span>
                    </div>
                </a>
            </div>
            <div class="kakao-action-wrapper">
                <a class="kakao-button" href="javascript:showToast('카카오톡 상담 기능은 준비 중입니다.')">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" height="16" viewBox="0 0 16 16" width="16"><path d="m8 2c3.866 0 7 2.44267 7 5.45667 0 3.01333-3.134 5.45603-7 5.45603-.38495.0002-.76952-.0243-1.15133-.0734l-2.93867 1.922c-.334.1767-.452.1574-.31467-.2753l.59467-2.452c-1.92-.9733-3.19-2.66-3.19-4.57733 0-3.01334 3.134-5.45667 7-5.45667z" fill="#000000"></path></svg>
                    <span>카카오톡으로 문의하기</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        // 스팸 클릭 방지
        let clickCount = 0;
        const maxClickCount = 10;
        const clickTimeout = 5000; // 5초

        function preventSpamClick(element) {
            clickCount++;
            if (clickCount > maxClickCount) {
                showToast('너무 빠른 클릭입니다. 잠시 후 다시 시도해주세요.');
                return false;
            }
            
            setTimeout(() => {
                clickCount = Math.max(0, clickCount - 1);
            }, clickTimeout);
            
            return true;
        }

        // 토스트 메시지 표시
        function showToast(message) {
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            
            Object.assign(toast.style, {
                position: 'fixed',
                top: '20px',
                left: '50%',
                transform: 'translateX(-50%)',
                background: '#333',
                color: 'white',
                padding: '12px 24px',
                borderRadius: '20px',
                fontSize: '14px',
                zIndex: '9999',
                opacity: '0',
                transition: 'all 0.3s ease'
            });
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '1';
                toast.style.transform = 'translateX(-50%) translateY(10px)';
            }, 100);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(-50%) translateY(-10px)';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // 대출이자 계산기
        function calculateLoan() {
            const amount = parseFloat(document.getElementById('loanAmount').value);
            const rate = parseFloat(document.getElementById('interestRate').value);
            const term = parseFloat(document.getElementById('loanTerm').value);
            
            if (!amount || !rate || !term) {
                showToast('모든 값을 입력해주세요.');
                return;
            }
            
            const monthlyRate = rate / 100 / 12;
            const totalPayments = term * 12;
            
            const monthlyPayment = amount * (monthlyRate * Math.pow(1 + monthlyRate, totalPayments)) / (Math.pow(1 + monthlyRate, totalPayments) - 1);
            const totalPayment = monthlyPayment * totalPayments;
            const totalInterest = totalPayment - amount;
            
            document.getElementById('monthlyPayment').textContent = `월 상환금: ${Math.round(monthlyPayment).toLocaleString()}원`;
            document.getElementById('totalInterest').textContent = `총 이자: ${Math.round(totalInterest).toLocaleString()}원`;
            document.getElementById('loanResult').style.display = 'block';
        }

        // 지원금 계산기
        function calculateSupport() {
            const familySize = parseInt(document.getElementById('familySize').value);
            const monthlyIncome = parseFloat(document.getElementById('monthlyIncome').value);
            
            if (!familySize || !monthlyIncome) {
                showToast('모든 값을 입력해주세요.');
                return;
            }
            
            const supportAmounts = {
                1: 250000,
                2: 400000,
                3: 500000,
                4: 550000,
                5: 550000,
                6: 550000
            };
            
            const supportAmount = supportAmounts[familySize] || 0;
            const isEligible = monthlyIncome <= 300; // 기준 중위소득 75% 이하 가정
            
            document.getElementById('supportAmount').textContent = `지원금: ${supportAmount.toLocaleString()}원`;
            document.getElementById('supportDetail').textContent = `지원 대상 여부: ${isEligible ? '예' : '아니오'}`;
            document.getElementById('supportResult').style.display = 'block';
        }

        // 환급금 계산기
        function calculateRefund() {
            const annualIncome = parseFloat(document.getElementById('annualIncome').value);
            const familyMembers = parseInt(document.getElementById('familyMembers').value);
            const childrenCount = parseInt(document.getElementById('childrenCount').value);
            
            if (!annualIncome || !familyMembers) {
                showToast('모든 값을 입력해주세요.');
                return;
            }
            
            // 간단한 환급금 계산 (실제 계산은 더 복잡함)
            let refundAmount = 0;
            
            // 근로장려금 계산 (간단한 버전)
            if (annualIncome <= 2000) {
                refundAmount += annualIncome * 0.15;
            } else if (annualIncome <= 3000) {
                refundAmount += 300 + (annualIncome - 2000) * 0.05;
            }
            
            // 자녀 세액공제
            refundAmount += childrenCount * 150000;
            
            document.getElementById('refundAmount').textContent = `환급금: ${Math.round(refundAmount).toLocaleString()}원`;
            document.getElementById('refundDetail').textContent = '근로장려금 + 자녀세액공제 포함';
            document.getElementById('refundResult').style.display = 'block';
        }

        // 근로장려금 계산기 열기
        function openEarnedIncomeCalculator() {
            if (!preventSpamClick()) return;
            
            const modal = document.getElementById('earnedIncomeModal');
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        // 근로장려금 계산기 닫기
        function closeEarnedIncomeCalculator() {
            const modal = document.getElementById('earnedIncomeModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // 근로장려금 계산
        function calculateEarnedIncome() {
            const earnedIncome = parseFloat(document.getElementById('earnedIncome').value);
            const familyMembers = parseInt(document.getElementById('familyMembers').value);
            const childrenCount = parseInt(document.getElementById('childrenCount').value);
            
            if (!earnedIncome || !familyMembers) {
                showToast('모든 값을 입력해주세요.');
                return;
            }
            
            // 2025년 근로장려금 계산 기준 (실제 기준과 다를 수 있음)
            let earnedIncomeCredit = 0;
            let isEligible = false;
            
            // 소득 기준 (가족 구성원에 따라 다름)
            const incomeLimits = {
                1: 2000, // 1인 가구: 2000만원
                2: 2500, // 2인 가구: 2500만원
                3: 3000, // 3인 가구: 3000만원
                4: 3500, // 4인 가구: 3500만원
                5: 4000, // 5인 가구: 4000만원
                6: 4500  // 6인 이상: 4500만원
            };
            
            const incomeLimit = incomeLimits[familyMembers] || 4500;
            
            if (earnedIncome <= incomeLimit) {
                isEligible = true;
                
                // 기본 근로장려금 계산
                if (earnedIncome <= 1200) {
                    earnedIncomeCredit = earnedIncome * 0.15;
                } else if (earnedIncome <= 2000) {
                    earnedIncomeCredit = 180 + (earnedIncome - 1200) * 0.05;
                } else {
                    earnedIncomeCredit = 220 + (earnedIncome - 2000) * 0.02;
                }
                
                // 자녀 추가 지원
                earnedIncomeCredit += childrenCount * 50;
                
                // 최대 한도 적용
                earnedIncomeCredit = Math.min(earnedIncomeCredit, 120);
            }
            
            document.getElementById('earnedIncomeAmount').textContent = `근로장려금: ${Math.round(earnedIncomeCredit).toLocaleString()}만원`;
            document.getElementById('earnedIncomeDetail').textContent = `지원 대상 여부: ${isEligible ? '예' : '아니오'}`;
            document.getElementById('earnedIncomeResult').style.display = 'block';
        }

        // 연봉 계산기
        function calculateSalary() {
            const monthlySalary = parseFloat(document.getElementById('monthlySalary').value);
            const yearEndTax = document.getElementById('yearEndTax').value;
            
            if (!monthlySalary) {
                showToast('월 급여를 입력해주세요.');
                return;
            }
            
            const annualSalary = monthlySalary * 12;
            const taxRate = 0.15; // 간단한 세율 계산
            const netSalary = annualSalary * (1 - taxRate);
            
            document.getElementById('annualSalary').textContent = `연봉: ${Math.round(annualSalary).toLocaleString()}원`;
            document.getElementById('netSalary').textContent = `세후 실수령액: ${Math.round(netSalary).toLocaleString()}원`;
            document.getElementById('salaryResult').style.display = 'block';
        }

        // 지원금 모달 관련 함수들
        function openSupportModal() {
            if (!preventSpamClick()) return;
            
            const modal = document.getElementById('supportModal');
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeSupportModal() {
            const modal = document.getElementById('supportModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // 더보기 메뉴 열기
        function openMoreMenu() {
            if (!preventSpamClick()) return;
            
            const overlay = document.getElementById('moreMenuOverlay');
            const modal = document.getElementById('moreMenuModal');
            if (overlay && modal) {
                overlay.classList.add('active');
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        // 더보기 메뉴 닫기
        function closeMoreMenu() {
            const overlay = document.getElementById('moreMenuOverlay');
            const modal = document.getElementById('moreMenuModal');
            if (overlay && modal) {
                overlay.classList.remove('active');
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // 배너 닫기
        function closeBanner() {
            const banner = document.getElementById('topBanner');
            if (banner) {
                banner.style.display = 'none';
                document.querySelector('.main-content').style.marginTop = '0';
            }
        }

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', () => {
            // 햄버거 메뉴 버튼 기능
            const menuBtn = document.getElementById('menuBtn');
            if (menuBtn) {
                menuBtn.addEventListener('click', () => {
                    if (!preventSpamClick(menuBtn)) return;
                    openMoreMenu();
                });
            }

            // 계산기 탭 전환 함수
            function switchCalculatorTab(tabType) {
                if (!preventSpamClick()) return;
                
                const tabs = document.querySelectorAll('.calculator-tab');
                tabs.forEach(tab => tab.classList.remove('active'));
                event.target.classList.add('active');
                
                // 탭별 내용 변경
                switch(tabType) {
                    case 'loan':
                        showToast('대출이자 계산기를 사용하세요.');
                        break;
                    case 'support':
                        showToast('지원금 계산기를 사용하세요.');
                        break;
                    case 'refund':
                        showToast('환급금 계산기를 사용하세요.');
                        break;
                    case 'salary':
                        showToast('연봉 계산기를 사용하세요.');
                        break;
                }
            }

            // 검색 버튼 기능
            document.querySelector('.search-btn').addEventListener('click', () => {
                if (!preventSpamClick()) return;
                showToast('검색 기능이 곧 업데이트됩니다! 🔍');
            });

            // 탭 기능
            const tabs = document.querySelectorAll('.calculator-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    showToast('계산기가 변경되었습니다.');
                });
            });

            // ESC 키로 모달 닫기
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    closeMoreMenu();
                    closeSupportModal();
                    closeEarnedIncomeCalculator();
                }
            });
            
            // 개발자 도구 방지
            document.addEventListener('keydown', function(e) {
                if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                    e.preventDefault();
                    showToast('개발자 도구 사용이 제한됩니다.');
                    return false;
                }
            });
            
            // 우클릭 방지 (선택적)
            document.addEventListener('contextmenu', function(e) {
                if (e.target.closest('.allow-right-click')) {
                    return true;
                }
                e.preventDefault();
                showToast('우클릭이 제한됩니다.');
                return false;
            });
        });
    </script>
</body>
</html> 